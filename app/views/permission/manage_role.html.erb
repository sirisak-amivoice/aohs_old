<% content_for :header do %>
<script type="text/javascript">
    $(document).ready(function(){

      $("#roleView").focus(function(){
        var list = document.getElementById("roleView");
          var theList = "";
          // start with a "?" to make it look like a real query-string
          for (i = 0; i <= list.options.length-1; i++) {
            theList += (i+1).toString() + "=" + list.options[i].text;
            //theList += list.options[i].value + "=" + list.options[i].text;
            // a "&" only BETWEEN the items, so not at the end
            if (i != list.options.length-1) theList += ",";
          }
          $("#role_list").val(theList);
          //$("#values").val(theList);
      });

    });

    function move(index,to) {
      var list = document.getElementById("roleView");
      var total = list.options.length-1;

      if (index == -1) return false;
      if (to == +1 && index == total) return false;
      if (to == -1 && index == 0) return false;

      var items = new Array;
      var values = new Array;

      for (i = total; i >= 0; i--) {
        items[i] = list.options[i].text;
        values[i] = list.options[i].value;
      }

      for (i = total; i >= 0; i--) {
        if (index == i) {
          list.options[i + to] = new Option(items[i],values[i + to], 0, 1);
          list.options[i] = new Option(items[i + to], values[i]);
          i--;
        }
        else {
          list.options[i] = new Option(items[i], values[i]);
        }
      }

      list.focus();
     }
  
</script>
 <style>
    #selection, .selection {
      font-size:16px;
      width:250px;
      color:blue;
      height:150px;
    }
    #click-up {
      width:70px;
      margin-left:10px;
    }
    #click-down {
      width:70px;
      margin-left:10px;
    }
    #click-reset {
      width:70px;
      margin-left:10px;
      margin-top:5px;
    }
  </style>
<% end %>

<% content_for :submenu do %>
  <div id="submenu">
    <table width="100%">
      <tr>
        <td align="left">
          <ul>
            <li><%= link_image_tag('Back','back.png',{:controller => "permission",:action => "index"}) %></li>
          </ul>
        </td>
        <td align="right">
        </td>
      </tr>
    </table>
  </div>
<% end %>

<div id="div-block-tree">
    <div class="div-form-default-style1">
  <table class="tblfrm" width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td><span class="span-form-title">Role Priority</span></td>
    </tr>
    <tr>
        <td><span class="span-form-name">Role List</span></td>
    </tr>
    <tr>
      <td>
      	<%= form_tag :controller => 'permission',:action => 'manage_role', :order => 'update' do %>
        <table class="tbl-frm-details">
          <tr>
            <td colspan="2"><span class="span-field-description">Use order button to order role for display.</span></td>
          </tr>
          <tr>
            <td>
               <select id="roleView" multiple="multiple" name="roles" style="height:250px;width:200px;">
               <% @roles.each do |r| %>
			   		<option id="role-<%=r.id %>" value="<%=r.id %>"><%=r.name %></option>
			   <% end %>
               </select>
			   <%= (hidden_field_tag "role_list").html_safe %>
            </td>
            <td align="center">
              <input type="button" value="Up" id="click-up" onClick="move(this.form.roles.selectedIndex,-1)"><br>
              <input type="button" value="Down" id="click-down" onClick="move(this.form.roles.selectedIndex,+1)"><br>
            </td>
          </tr>
          <tr>
            <td colspan="2"><%= submit_tag('Save change',{:class => 'btnAccept'}) %></td>
          </tr>
        </table>
		<% end %>
      </td>
    </tr>
  </table>
</div> </div>
