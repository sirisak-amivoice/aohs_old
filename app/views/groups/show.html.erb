<% content_for :header do %>

<% end %>

<% content_for :submenu do %>
  <div id="submenu">
    <table width="100%">
      <tr>
        <td align="left">
          <ul>
            <li><%= link_image_tag('Back','back.png',{:controller => "groups",:action=>"index"},{:title => 'Back to group list'}) %></li>
            <li><%= link_image_tag('Edit group','edit.png',{:controller => "groups",:action=>"edit", :id => @group.id},{:title => 'Edit group'}) %></li>
          </ul>
        </td>
        <td align="right">

        </td>
      </tr>
    </table>
  </div>
<% end %>

<div class="div-form-default-style2">
  <table class="tblfrm" width="100%" cellpadding="0" cellspacing="0">
    <tr>
      <td><span class="span-form-name">Group infomation</span></td>
    </tr>
    <tr>
      <td>
          <table class="tbl-frm-details" cellpadding="0" cellspacing="0">
            <tr>
              <td width="150px"><label>Group name</label></td>
              <td><%= @group.name %></td>
            </tr>
            <tr>
              <td><label>Description</label></td>
              <td><%= @group.description %></td>
            </tr>
            <tr>
              <td><label>Leader name</label></td>
              <td><%= @group.leader.nil? ? "-" : @group.leader.display_name %></td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td><label>Categories list</label></td>
              <td></td>
            </tr>
            <% unless @group_category_type_names.nil? %>
            <% @group_category_type_names.each do |gct| %>
            <% categories = {} %>
            <% @group.categories.to_ary.map{|c| categories[c.category_type.name] = c.value } -%>
            <tr>
              <td><label><%=gct%> : </label></td>
              <td><%= gct.map{|category_type_name| categories[category_type_name]}%></td>
            </tr>
            <% end %>
            <% end %>
            </table>
      </td>
    </tr>
    <tr>
      <td><span class="span-form-name">Group member (Agents)</span></td>
    </tr>
    <tr>
      <td>
        <div class="div-tbl-default-style1">
        <table class="frmdetailandtbl" cellpadding="0" cellspacing="0">
          <tr>
            <th width="25px">No</th>
            <th>Account</th>
            <th>Display name</th>
            <th>Sex</th>
            <th>Status</th>
            <th>Expired date</th>
          </tr>
          <% unless @agents.empty? %>
          <% @agents.each_with_index do |agent,i| %>
          <tr class="<%=cycle('tr-odd','tr-even')%>">
            <td align="center" width="25px"><%=i+1%></td>
            <td><%= agent.login %></td>
            <td><%= agent.display_name %></td>
            <td><%= agent.sex2 %></td>
            <% usr_login_status = (agent.state == 'pending' or agent.state == 'passive') ? 'inactive' : 'active' %> 
            <td><span class="span-<%=usr_login_status %>"><%=usr_login_status %></span></td>
            <td><%=h agent.expired_date.nil? ? "-" : agent.expired_date.strftime('%Y-%m-%d')%></td>
          </tr>
          <% end %>
          <% else %>
            <tr>
              <td colspan="6" align="center"> No group member</td>
            </tr>
          <% end %>
        </table> </div>
      </td>
    </tr>
  </table>
</div>
